!function(){"use strict";function t(t,e,s,n){return new(s||(s=Promise))((function(a,o){function d(t){try{r(n.next(t))}catch(t){o(t)}}function i(t){try{r(n.throw(t))}catch(t){o(t)}}function r(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(d,i)}r((n=n.apply(t,e||[])).next())}))}class e{static handleResponse(e){return t(this,void 0,void 0,(function*(){const t=yield e.text();if(e.status>=200&&e.status<300)return{status:"succeeded",data:JSON.parse(t)};{const s=JSON.parse(t);return 401===e.status?{status:"unauthorized",error:s.error}:403===e.status?{status:"forbidden",error:s.error}:404===e.status?{status:"not-found",error:s.error}:e.status>=500&&e.status<600?{status:"failed",error:s.error}:{status:"failed",error:`Unexpected status code: ${e.status}`}}}))}}var s;!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.PATCH="PATCH",t.DELETE="DELETE"}(s||(s={}));const n=new class{constructor(){this.observers=[],this.state={status:"idle",error:null}}addObserver(t){this.observers.push(t)}removeObserver(t){this.observers=this.observers.filter((e=>e!==t))}notifyObservers(){this.observers.forEach((t=>t.update(this.state)))}setState(t){this.state=Object.assign(Object.assign({},this.state),t),this.notifyObservers()}getState(){return this.state}makeRequest(s,n,a,o){return t(this,void 0,void 0,(function*(){this.setState({status:"loading",error:null});const t={method:s,headers:Object.assign({"Content-Type":"application/json"},o),body:a?JSON.stringify(a):void 0};try{const s=yield fetch(n,t);return yield e.handleResponse(s)}catch(t){this.setState({status:"failed",error:t.message})}}))}};var a,o,d,i,r,l,c,u,m,h;const p=new class{constructor(t=document.body,e=document.createElement("div")){this.parentElement=t,this.dataElement=e,this.dataElement.id="data",this.elements={},this.parentElement.appendChild(this.dataElement)}set parent(t){this.parentElement=t}set data(t){this.dataElement=t}createElement(t){const e=document.createElement("div");switch(e.id=t,e.style.display="none",t){case"idle":e.innerText="Idle...";break;case"loading":e.innerText="Loading...";break;case"succeeded":e.innerText="Request succeed!";break;case"failed":e.innerText="Request failed!";break;case"not-found":e.innerText="Not found!"}return this.parentElement.appendChild(e),e}update(t){this.elements[t.status]||(this.elements[t.status]=this.createElement(t.status));for(let t in this.elements)this.elements[t].style.display="none";this.elements[t.status].style.display="block","succeeded"===t.status?"string"==typeof t.data?this.dataElement.innerText=t.data:this.dataElement.innerText=JSON.stringify(t.data,null,2):this.dataElement.innerText=""}};p.parent=document.getElementById("status"),p.data=document.getElementById("data");const E=new class{constructor(t,e){this.changeHandler=t,this.dataElementId=e,this.data=null,this.displayElement=null,this.displayElement=document.getElementById(this.dataElementId)}update(t){this.data=t,this.displayData()}displayData(){var t;this.displayElement&&(null===(t=this.data)||void 0===t?void 0:t.data)&&(this.displayElement.innerText=JSON.stringify(this.data.data)),this.changeHandler(this.data)}}((t=>{p.update(t)}),"data");function v(t){E.update({status:"loading",error:null,data:null}),t.then((t=>{"not-found"===t.status?function(t){const e={status:"not-found",error:t.error,data:null};E.update(e)}(t):function(t){const e={status:"succeeded",error:null,data:t};E.update(e)}(t)})).catch(y).finally((()=>{console.log("Request complete!")}))}function y(t){const e={status:"failed",error:t.message,data:null};E.update(e)}null===(a=document.getElementById("getPosts"))||void 0===a||a.addEventListener("click",(()=>{v(n.makeRequest(s.GET,"https://jsonplaceholder.typicode.com/posts"))})),null===(o=document.getElementById("getPostComments"))||void 0===o||o.addEventListener("click",(()=>{var t;v((t=1,n.makeRequest(s.GET,`https://jsonplaceholder.typicode.com/posts/${t}/comments`)))})),null===(d=document.getElementById("getCommentsByPostId"))||void 0===d||d.addEventListener("click",(()=>{var t;v((t=1,n.makeRequest(s.GET,`https://jsonplaceholder.typicode.com/comments?postId=${t}`)))})),null===(i=document.getElementById("createPost"))||void 0===i||i.addEventListener("click",(()=>{var t;v((t={title:"foo",body:"bar",userId:1},n.makeRequest(s.POST,"https://jsonplaceholder.typicode.com/posts",t)))})),null===(r=document.getElementById("patchPost"))||void 0===r||r.addEventListener("click",(()=>{var t,e;v((t=1,e={title:"foo"},n.makeRequest(s.PUT,`https://jsonplaceholder.typicode.com/posts/${t}`,e)))})),null===(l=document.getElementById("deletePost"))||void 0===l||l.addEventListener("click",(()=>{var t;v((t=1,n.makeRequest(s.DELETE,`https://jsonplaceholder.typicode.com/posts/${t}`)))})),null===(c=document.getElementById("getTodos"))||void 0===c||c.addEventListener("click",(()=>{v(n.makeRequest(s.GET,"https://jsonplaceholder.typicode.com/todos"))})),null===(u=document.getElementById("createTodo"))||void 0===u||u.addEventListener("click",(()=>{var t;v((t={title:"foo",completed:!1},n.makeRequest(s.POST,"https://jsonplaceholder.typicode.com/todos",t)))})),null===(m=document.getElementById("posts1000"))||void 0===m||m.addEventListener("click",(()=>{var t;v((t=1e3,n.makeRequest(s.GET,`https://jsonplaceholder.typicode.com/posts/${t}`)))})),null===(h=document.getElementById("privateResource"))||void 0===h||h.addEventListener("click",(()=>{var t;v((t="invalid-token",n.makeRequest(s.GET,"https://reqres.in/api/protectedresource",void 0,{Authorization:`Bearer ${t}`})))}))}();
//# sourceMappingURL=bundle.js.map
