!function(){"use strict";function e(e,t,s,n){return new(s||(s=Promise))((function(a,d){function o(e){try{l(n.next(e))}catch(e){d(e)}}function i(e){try{l(n.throw(e))}catch(e){d(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,i)}l((n=n.apply(e,t||[])).next())}))}var t;!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(t||(t={}));const s=new class{constructor(){this.observers=[],this.state={status:"idle",error:null}}addObserver(e){this.observers.push(e)}removeObserver(e){this.observers=this.observers.filter((t=>t!==e))}notifyObservers(){this.observers.forEach((e=>e.update(this.state)))}setState(e){this.state=Object.assign(Object.assign({},this.state),e),this.notifyObservers()}getState(){return this.state}makeRequest(t,s,n){return e(this,void 0,void 0,(function*(){this.setState({status:"loading",error:null});const e={method:t,headers:{"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0};try{const t=yield fetch(s,e),n=yield t.json();return this.setState({status:"succeeded",data:n}),n}catch(e){this.setState({status:"failed",error:e.message})}}))}};var n,a,d,o,i,l,c,r;const u=new class{constructor(e=document.body,t=document.createElement("div")){this.parentElement=e,this.dataElement=t,this.dataElement.id="data",this.elements={},this.parentElement.appendChild(this.dataElement)}set parent(e){this.parentElement=e}set data(e){this.dataElement=e}createElement(e){const t=document.createElement("div");switch(t.id=e,t.style.display="none",e){case"idle":t.innerText="Idle...";break;case"loading":t.innerText="Loading...";break;case"succeeded":t.innerText="Request succeeded!";break;case"failed":t.innerText="Request failed!"}return this.parentElement.appendChild(t),t}update(e){this.elements[e.status]||(this.elements[e.status]=this.createElement(e.status));for(let e in this.elements)this.elements[e].style.display="none";this.elements[e.status].style.display="block","succeeded"===e.status?this.dataElement.innerText=JSON.stringify(e.data,null,2):this.dataElement.innerText=""}};u.parent=document.getElementById("status"),u.data=document.getElementById("data");const m=new class{constructor(e,t){this.changeHandler=e,this.dataElementId=t,this.data=null,this.displayElement=null,this.displayElement=document.getElementById(this.dataElementId)}update(e){this.data=e,this.displayData()}displayData(){var e;this.displayElement&&(null===(e=this.data)||void 0===e?void 0:e.data)&&(this.displayElement.innerText=JSON.stringify(this.data.data)),this.changeHandler(this.data)}}((e=>{u.update(e)}),"data");function h(e){m.update({status:"loading",error:null,data:null}),e.then(p).catch(E).finally((()=>{console.log("Request complete!")}))}function p(e){const t={status:"succeeded",error:null,data:e};m.update(t)}function E(e){const t={status:"failed",error:e.message,data:null};m.update(t)}null===(n=document.getElementById("getPosts"))||void 0===n||n.addEventListener("click",(()=>{h(s.makeRequest(t.GET,"https://jsonplaceholder.typicode.com/posts"))})),null===(a=document.getElementById("getPostComments"))||void 0===a||a.addEventListener("click",(()=>{var e;h((e=1,s.makeRequest(t.GET,`https://jsonplaceholder.typicode.com/posts/${e}/comments`)))})),null===(d=document.getElementById("getCommentsByPostId"))||void 0===d||d.addEventListener("click",(()=>{var e;h((e=1,s.makeRequest(t.GET,`https://jsonplaceholder.typicode.com/comments?postId=${e}`)))})),null===(o=document.getElementById("createPost"))||void 0===o||o.addEventListener("click",(()=>{var e;h((e={title:"foo",body:"bar",userId:1},s.makeRequest(t.POST,"https://jsonplaceholder.typicode.com/posts",e)))})),null===(i=document.getElementById("patchPost"))||void 0===i||i.addEventListener("click",(()=>{var e,n;h((e=1,n={title:"foo"},s.makeRequest(t.PUT,`https://jsonplaceholder.typicode.com/posts/${e}`,n)))})),null===(l=document.getElementById("deletePost"))||void 0===l||l.addEventListener("click",(()=>{var e;h((e=1,s.makeRequest(t.DELETE,`https://jsonplaceholder.typicode.com/posts/${e}`)))})),null===(c=document.getElementById("getTodos"))||void 0===c||c.addEventListener("click",(()=>{h(s.makeRequest(t.GET,"https://jsonplaceholder.typicode.com/todos"))})),null===(r=document.getElementById("createTodo"))||void 0===r||r.addEventListener("click",(()=>{var e;h((e={title:"foo",completed:!1},s.makeRequest(t.POST,"https://jsonplaceholder.typicode.com/todos",e)))}))}();
//# sourceMappingURL=bundle.js.map
